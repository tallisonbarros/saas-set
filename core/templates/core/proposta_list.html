{% load static %}
<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Minhas Propostas</title>
    <style>
      body { font-family: Arial, sans-serif; background: #f6f6f6; }
      .container { max-width: 900px; margin: 24px auto; background: #fff; padding: 24px; border-radius: 8px; }
      .header { display: flex; justify-content: center; margin-bottom: 24px; }
      .logo { height: 48px; }
      .content { margin-top: 24px; }
      table { width: 100%; border-collapse: collapse; margin-top: 16px; }
      th, td { text-align: left; padding: 10px; border-bottom: 1px solid #eee; }
      .status { font-weight: bold; }
      .actions form { display: inline; }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <a href="{% url 'home' %}"><img class="logo" src="{% static 'core/logoset.png' %}" alt="Logo"></a>
      </div>
      <div class="content">
        <div>
          <strong>{{ cliente.nome }}</strong>
          {% if cliente.logo %}
            <div><img src="{{ cliente.logo.url }}" alt="Logo" width="120"></div>
          {% endif %}
        </div>
        {% if not cliente %}
          <p>Usuario sem cliente associado. Fale com o administrador.</p>
        {% elif propostas %}
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>Codigo</th>
                <th>Descricao</th>
                <th>Valor</th>
                <th>Status</th>
                <th>Acoes</th>
              </tr>
            </thead>
            <tbody>
              {% for proposta in propostas %}
                <tr>
                  <td>{{ proposta.nome }}</td>
                  <td>{{ proposta.codigo }}</td>
                  <td>{{ proposta.descricao }}</td>
                  <td>R$ {{ proposta.valor }}</td>
                  <td class="status">{{ proposta.get_status_display }}</td>
                  <td class="actions">
                    {% if proposta.status == "PENDENTE" %}
                      <form method="post" action="{% url 'aprovar_proposta' proposta.pk %}">
                        {% csrf_token %}
                        <button type="submit">Aprovar</button>
                      </form>
                    {% else %}
                      -
                    {% endif %}
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p>Sem propostas no momento.</p>
        {% endif %}
      </div>
      <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit">Sair</button>
      </form>
    </div>
  </body>
</html>
